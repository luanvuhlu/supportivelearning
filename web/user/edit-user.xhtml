<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
     xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <p:panel header="Update User">
    <h:form id="update-user">
        <p:growl id="messages" showDetail="true" />
        <p:messages id="msg" showDetail="true"  />
        <c:set var="user" value="#{updateUser.user}" />
        <!--table User-->
        <p:panelGrid columns="4" styleClass="panel-two-cols">
            <c:if test="#{not updateUser.addMode}">

                        <h:outputLabel for="username" value="Username" />

                        <p:inputText id="username" 
                                     value="#{user.username}"
                                     required="true"
                                     requiredMessage="Username is required"/>
                    
                

                
                    
                        <h:outputLabel for="password" value="Password" />
                    
                    
                        <p:inputText id="password" value="#{user.password}" 
                                     required="true"
                                     requiredMessage="Password is required"/>
                    
                
            </c:if>
            
                
                    <h:outputLabel for="firstName" value="First name" />
                
                
                    <p:inputText id="firstName" value="#{user.firstName}"
                                 required="true"
                                     requiredMessage="First Name is required"/>
                
            
            
                
                    <h:outputLabel for="lastName" value="Last Name" />
                
                
                    <p:inputText id="lastName" value="#{user.lastName}"
                                 required="true"
                                  requiredMessage="Last Name is required"/>
                
            
            
                
                    <h:outputLabel for="roles" value="Role" />
                
                    <p:panelGrid columns="1">
                        
                    
                    <p:selectManyCheckbox id="roles" value="#{updateUser.roleIds}"
                                          required="true"
                                     requiredMessage="Role is required"
                                     >
                        <p:ajax update="subjects" listener="#{updateUser.selectedRole}" />
                        <f:selectItems value="#{updateUser.allRoles}" /> 
                    </p:selectManyCheckbox>  
                </p:panelGrid>
            
            
                
                    <h:outputLabel for="subjects" value="Subject" />
                
                
                    <p:selectCheckboxMenu id="subjects" value="#{updateUser.subjectIds}"
                                          label="Subjects" filter="true"
                                          filterMatchMode="startsWith"
                                          panelStyle="width:220px"
                                          disabled="#{not updateUser.staff}"
                                          >  
                        <f:selectItems value="#{updateUser.allSubjects}" /> 
                    </p:selectCheckboxMenu>  
                
            
            
                
                    <h:outputLabel for="email" value="Email" />
                
                
                    <p:inputText id="email" value="#{user.email}"  /> 
                
            
            
                
                    <h:outputLabel for="birthday" value="Birthday" />
                
                
                    <p:inputText id="birthday" value="#{user.birthday}"  /> 
                
            
            
                
                    <h:outputLabel for="phone" value="Phone" />
                
                
                    <p:inputText id="phone" value="#{user.phone}"   
                                 /> 
                
            
            
                
                    <h:outputLabel for="gender" value="Gender" />
                
                
                    <p:selectBooleanButton id="gender" value="#{user.gender}"
                                           onLabel="Male" offLabel="Female"
                                           onIcon="ui-icon-check" offIcon="ui-icon-close"/>
                
            
            
                
                    <h:outputLabel for="address" value="Address" />
                
                
                    <p:inputTextarea id="address" value="#{user.address}" />
            
            <c:if test="#{not updateUser.addMode}">
                
                    
                        <h:outputLabel for="status" value="Status" />
                    
                    
                        <p:selectBooleanButton id="status" value="#{user.status}"
                                               onLabel="Lock" offLabel="Unlock"
                                               onIcon="ui-icon-check" offIcon="ui-icon-close"/>
                    
                
            </c:if>
        </p:panelGrid>
        <p:toolbar>
                <p:toolbarGroup align="left">
                    <p:commandButton value="Save"
                                     icon="ui-icon-check"
                                     styleClass="small-button"
                                     actionListener="#{updateUser.save}"
                                     update="update-user, messages, msg"
                                     />
                    <p:commandButton 
                        value="Reset" 
                        icon="ui-icon-refresh"
                        styleClass="small-button"
                        update="update-user, msg" 
                        process="@this" 
                        actionListener="#{updateUser.reset}" />
                    <p:button 
                        value="View list" 
                        styleClass="small-button"
                        outcome="manager.xhtml?action=user"
                        />
                </p:toolbarGroup>
            </p:toolbar>
        <!--end table User-->

    </h:form>
    </p:panel>
</div>